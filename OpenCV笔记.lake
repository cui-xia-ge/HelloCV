<!doctype lake><title>OpenCV笔记</title><meta name="doc-version" content="1" /><meta name="viewport" content="fixed" /><meta name="typography" content="classic" /><meta name="paragraphSpacing" content="relax" /><h3 data-lake-id="RjubN" id="RjubN" style="text-align: center"><span data-lake-id="uaa26dac2" id="uaa26dac2">1.常用库</span></h3><p data-lake-id="u769b0b87" id="u769b0b87"><span data-lake-id="u36c47089" id="u36c47089" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">core：包含基本数据结构和函数，如图像存储、矩阵操作、文件 I/O 等。</span></p><p data-lake-id="u489d376e" id="u489d376e"><span data-lake-id="uc73d7458" id="uc73d7458" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">imgproc：图像处理功能，包括滤波、几何变换、颜色空间转换、边缘检测、形态学操作、阈值化等。</span></p><p data-lake-id="u4c5a1d16" id="u4c5a1d16"><span data-lake-id="ud27c784c" id="ud27c784c" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">imgcodecs：图像</span><span data-lake-id="uc8522abe" id="uc8522abe" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">读取和保存</span></p><p data-lake-id="u7513d49e" id="u7513d49e"><span data-lake-id="u0cf81ef7" id="u0cf81ef7" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">highgpi：图像和视频读写</span><span data-lake-id="u42e1e570" id="u42e1e570" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">显示、窗口管理、用户交互（如鼠标事件、滑动条）。</span></p><p data-lake-id="u1aa93c2b" id="u1aa93c2b"><span data-lake-id="uc607fdfe" id="uc607fdfe" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">video：视频处理功能，包括视频捕获、背景减除、光流计算等。</span></p><h3 data-lake-id="OEK1q" id="OEK1q" style="text-align: center"><span data-lake-id="u531825e7" id="u531825e7" style="color: rgb(63, 74, 84)">2.常用库函数与基本类</span></h3><p data-lake-id="u6e2857f5" id="u6e2857f5"><span data-lake-id="u7c232aa6" id="u7c232aa6" class="lake-fontsize-12">Point(int x,int y)封装一个点的横纵坐标</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Point%20a(2%2C3)%3B%20%20%2F%2Fa.x%3D%3D2%3Ba.y%3D%3D3%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22tViVF%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u8c0fb748" id="u8c0fb748"><span data-lake-id="u81fb8052" id="u81fb8052" class="lake-fontsize-12">Size：封装长、宽</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E6%9E%84%E9%80%A0%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Size%20(Size%20%26other)%5CnSize%20(int%20width%2C%20int%20height)%5CnSize%20a(3%2C2)%5Ct%5Ct%2F%2F%E6%AD%A4%E6%97%B6a.width%3D%3D3%3Ba.height%3D%3D2%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E6%9E%84%E9%80%A0%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22aqcKJ%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u109e1066" id="u109e1066"><span data-lake-id="uee3d3ba1" id="uee3d3ba1" class="lake-fontsize-12">Rect：轴对齐矩形</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Rect(int%20x%2C%20int%20y%2C%20int%20w%2C%20int%20h)%5CnRect(Point%20p%2C%20Size%20sz)%5CnRect(Rect%20const%26%20r)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22wJPxH%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="ue0e2288b" id="ue0e2288b" style="text-indent: 2em"><span data-lake-id="uccce95cb" id="uccce95cb" class="lake-fontsize-12">(x,y)、p为左上顶点；w、h为宽、高。</span></p><p data-lake-id="ubfe287b4" id="ubfe287b4" style="text-indent: 2em"><span data-lake-id="u10a6d5dd" id="u10a6d5dd" class="lake-fontsize-12">.tl()、.br()：返回左上/右下Point变量</span></p><p data-lake-id="u5e8bf4c6" id="u5e8bf4c6" style="text-indent: 2em"><span data-lake-id="ua84ed27e" id="ua84ed27e" class="lake-fontsize-12">,empty()：当width、height不大于0时返回true</span></p><p data-lake-id="ub14d5f15" id="ub14d5f15" style="text-indent: 2em"><span data-lake-id="u26709bec" id="u26709bec" class="lake-fontsize-12">运算符</span></p><p data-lake-id="u91a8e490" id="u91a8e490" style="text-indent: 2em; padding-left: 2em"><span data-lake-id="u0459e3a0" id="u0459e3a0" class="lake-fontsize-12">&amp;：取两矩形交集</span></p><p data-lake-id="ub0fcda85" id="ub0fcda85" style="text-indent: 2em; padding-left: 2em"><span data-lake-id="u1c61d33b" id="u1c61d33b" class="lake-fontsize-12">+-实现平移</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E5%B9%B3%E7%A7%BBa%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Rect%20a(1%2C2%2C5%2C5)%3B%5CtPoint%20p(1%2C1)%3B%5Cna%2B%3Dp%3B%5Ct%5Ct%5Ct%5Ct%2F%2Fa(2%2C3%2C5%2C5)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E5%B9%B3%E7%A7%BBa%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22__widthMode%22%3A%22normal%22%2C%22id%22%3A%22agR87%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22widthMode%22%3A%22normal%22%7D" hindent="4em"></card><p data-lake-id="u07bdfe83" id="u07bdfe83"><span data-lake-id="u53aced64" id="u53aced64" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">Scalar(v0, v1, v2, v3=0)：当个行矩阵就行</span></p><p data-lake-id="ud37a7f34" id="ud37a7f34" style="text-indent: 2em"><span data-lake-id="u78f77c47" id="u78f77c47" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">常用于多通道图像的像素赋值。</span></p><p data-lake-id="u0c7742b2" id="u0c7742b2"><span data-lake-id="u2c84fc8c" id="u2c84fc8c" class="lake-fontsize-12">Vec：变长向量</span></p><p data-lake-id="uf1c0b1a3" id="uf1c0b1a3" style="text-indent: 2em"><span data-lake-id="u65ad13c8" id="u65ad13c8" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">用模板类Vec&lt;uchar,3&gt;（简记为Vec3b）表示BGR像素类型</span></p><h5 data-lake-id="L8XLA" id="L8XLA"><span data-lake-id="u7c05bd20" id="u7c05bd20">cv::waitKey(int ms)</span></h5><p data-lake-id="ue2b1208b" id="ue2b1208b" style="text-indent: 2em"><span data-lake-id="u28512534" id="u28512534">ms: 等待用户再次按键（</span><span data-lake-id="u0c277898" id="u0c277898" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">键事件）</span><span data-lake-id="u5b866969" id="u5b866969">的时间，0为永久等待。</span><span data-lake-id="ufdad6d56" id="ufdad6d56" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">返回所按下键的代码。</span></p><h5 data-lake-id="n8uFe" id="n8uFe"><span data-lake-id="u29350502" id="u29350502">namedWindow(&quot;</span><span data-lake-id="ua90583c8" id="ua90583c8" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">winname&quot;</span><span data-lake-id="u9908dbf1" id="u9908dbf1">)</span></h5><p data-lake-id="uf91732de" id="uf91732de" style="text-indent: 2em"><span data-lake-id="u18eeeb35" id="u18eeeb35" class="lake-fontsize-11">创建名为winname的窗口，若已存在该名称窗口，则不执行任何操作。</span></p><h5 data-lake-id="XjtzM" id="XjtzM"><span data-lake-id="uc51bf348" id="uc51bf348">destroywindow(&quot;winname&quot;)/destroyAllWindows()</span></h5><p data-lake-id="u383783b7" id="u383783b7" style="text-indent: 2em"><span data-lake-id="uc38d70ad" id="uc38d70ad" class="lake-fontsize-11">关闭窗口winname/所有窗口。</span></p><h5 data-lake-id="nzQz7" id="nzQz7"><span data-lake-id="u7b666055" id="u7b666055" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">boundingRect(contour)</span></h5><p data-lake-id="u597ff377" id="u597ff377" style="text-indent: 2em"><span data-lake-id="u9f8c15bd" id="u9f8c15bd" class="lake-fontsize-11">返回给定点集或轮廓的轴对齐最小外接矩形(Rect类)。</span></p><h5 data-lake-id="HV2Fj" id="HV2Fj"><span data-lake-id="u5168028b" id="u5168028b">图形绘制</span></h5><p data-lake-id="ubf0e2cf2" id="ubf0e2cf2"><strong><span data-lake-id="ucc2f0ced" id="ucc2f0ced">circle</span></strong></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22circle(Mat%26%20img%2C%20Point%20center%2C%20int%20radius%2C%20const%20Scalar%26%20color%2Cint%20thickness%20%3D%201)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22oMOkg%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="uf81964b3" id="uf81964b3"><span data-lake-id="u9d690a0c" id="u9d690a0c" class="lake-fontsize-11">主要功能：在img中以center为圆心，radius为半径画一个color色，粗thickness的圆圈。</span></p><p data-lake-id="u6f8ceb3e" id="u6f8ceb3e"><span data-lake-id="u49ff50a4" id="u49ff50a4" class="lake-fontsize-11">thickness=FILLED时内部填充。</span></p><p data-lake-id="udeca7870" id="udeca7870"><strong><span data-lake-id="u61806c46" id="u61806c46" class="lake-fontsize-11">rectangle</span></strong></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22rectangle(Mat%26%20img%2C%20Point%20tl%2C%20Point%20br%2C%20const%20Scalar%26%20color%2Cint%20thickness%20%3D%201)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22dPyPF%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u06cb0799" id="u06cb0799"><span data-lake-id="u8695055f" id="u8695055f" class="lake-fontsize-11">主要功能：在img中基于两点tl和br生成color色的矩形。</span></p><p data-lake-id="ub7004962" id="ub7004962"><strong><span data-lake-id="u6de28985" id="u6de28985" class="lake-fontsize-11">line</span></strong></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22line(Mat%26%20img%2C%20Point%20a%2C%20Point%20b%2C%20const%20Scalar%26%20color%2Cint%20thickness%20%3D%201)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22B6piv%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u7bb0f4d5" id="u7bb0f4d5"><span data-lake-id="u630ef0f0" id="u630ef0f0" class="lake-fontsize-11">主要功能：在img中基于两点a,b生成一条线段。</span></p><p data-lake-id="ue6244aa8" id="ue6244aa8"><strong><span data-lake-id="ubdef7fb6" id="ubdef7fb6" class="lake-fontsize-11">putText</span></strong></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22putText(img%2C%5C%22text%5C%22%2CPoint(x%2Cy)%2C%E5%AD%97%E4%BD%93%E5%90%8D%E7%A7%B0%2Cscale%2CScalar(%2C%2C)%2Cthickness%20%3D%201)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22rC8BT%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="udb2bc867" id="udb2bc867"><span data-lake-id="u11f8fbfd" id="u11f8fbfd" class="lake-fontsize-11">主要功能：在img中以(x,y)为起点生成text。（scale：大小，正整数）。其他参数同上。</span></p><h3 data-lake-id="oETCq" id="oETCq" style="text-align: center"><span data-lake-id="u65b1c5d7" id="u65b1c5d7" style="color: rgb(0, 0, 0)">3.图像处理</span></h3><p data-lake-id="u470e0286" id="u470e0286"><span data-lake-id="u39bc3d97" id="u39bc3d97" class="lake-fontsize-11">默认支持的图像格式：</span><span data-lake-id="u8e019bae" id="u8e019bae" style="color: rgb(25, 27, 31)">*.bmp、*dib、*.pbm、*.pgm、*.ppm、*.sr、*.ras</span></p><h4 data-lake-id="V7T9g" id="V7T9g"><span data-lake-id="udcc9076a" id="udcc9076a" style="color: rgb(63, 74, 84)">3.1数据类：Mat</span></h4><p data-lake-id="u6c9a0572" id="u6c9a0572"><span data-lake-id="ud8c54bd5" id="ud8c54bd5" style="color: rgb(63, 74, 84)">用于存储图像</span><span data-lake-id="u5db01811" id="u5db01811" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">和矩阵数据</span><span data-lake-id="u7d5c45a7" id="u7d5c45a7" style="color: rgb(63, 74, 84)">。</span></p><p data-lake-id="u670ce1cd" id="u670ce1cd"><span data-lake-id="ufe6a003f" id="ufe6a003f" style="color: rgb(63, 74, 84)">分两个域：</span><strong><span data-lake-id="ua54615c9" id="ua54615c9" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">矩阵头</span></strong><span data-lake-id="u532bc923" id="u532bc923" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">（存放矩阵大小、存储方法、矩阵地址等信息）和</span><strong><span data-lake-id="u34d74366" id="u34d74366" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">指向包含像素值的矩阵的指针</span></strong><span data-lake-id="u114fbd85" id="u114fbd85" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">。</span></p><p data-lake-id="uc24800c5" id="uc24800c5"><span data-lake-id="u584b4028" id="u584b4028" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">主要</span><strong><span data-lake-id="udc576965" id="udc576965" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">成员</span></strong><span data-lake-id="u1419914d" id="u1419914d" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">：</span></p><p data-lake-id="u7d629abb" id="u7d629abb" style="padding-left: 2em"><span data-lake-id="uab56e501" id="uab56e501" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">rows存储矩阵行数</span></p><p data-lake-id="u34d799a4" id="u34d799a4" style="padding-left: 2em"><span data-lake-id="u7e783bda" id="u7e783bda" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">cols存储列数	</span></p><p data-lake-id="u8f085647" id="u8f085647" style="padding-left: 2em"><span data-lake-id="ubec36563" id="ubec36563" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">channels()：返回通道数，灰度图=1，RGB/BGR=3，RGBA=4.</span></p><p data-lake-id="ub2fb3faf" id="ub2fb3faf" style="padding-left: 4em"><strong><span data-lake-id="u656fabba" id="u656fabba" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">RGB/BGR区别</span></strong><span data-lake-id="ue7295a82" id="ue7295a82" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">为颜色通道顺序不同。OpenCV默认为BGR模式。</span></p><p data-lake-id="u4ad52481" id="u4ad52481" style="padding-left: 2em"><a href="https://docs.opencv.org/4.x/d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4" target="_blank" data-lake-id="ueb538573" id="ueb538573"><span data-lake-id="u153920b1" id="u153920b1" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">empty</span></a><span data-lake-id="u185d9c6a" id="u185d9c6a" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">()：对象成员函数，若为空返回真，否则返回假。</span></p><p data-lake-id="u60493c31" id="u60493c31" style="padding-left: 2em"><span data-lake-id="ua72c31bc" id="ua72c31bc" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">setTo(Scalar value): 用value为所有像素赋值（运算符“=”的高级版）</span></p><p data-lake-id="ua44b3cd2" id="ua44b3cd2" style="padding-left: 2em"><span data-lake-id="uca71e404" id="uca71e404" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">at&lt;像素类型&gt;(x, y): </span><span data-lake-id="u4c36a57d" id="u4c36a57d" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">返回对像素（x，y）的引用。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E4%BE%8B%20BGR%E5%9B%BE%E5%83%8F%E7%B4%A0%E8%AE%BF%E9%97%AE%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3AVec3b%20pixel%20%3D%20image.at%3Ccv%3A%3AVec3b%3E(y%2C%20x)%3B%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E4%BE%8B%20BGR%E5%9B%BE%E5%83%8F%E7%B4%A0%E8%AE%BF%E9%97%AE%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22__widthMode%22%3A%22normal%22%2C%22id%22%3A%22lBbGh%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22widthMode%22%3A%22normal%22%7D" hindent="2em"></card><p data-lake-id="u40f4f111" id="u40f4f111"><span data-lake-id="ubc0d99ba" id="ubc0d99ba" class="lake-fontsize-12">显式创建（调用构造函数）</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA640x480%E7%9A%84%E7%BA%A2%E8%89%B2%E5%9B%BE%E5%83%8F%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3AMat%20img(480%2C%20640%2C%20CV_8UC3%2C%20cv%3A%3AScalar(0%2C%200%2C%20255))%3B%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA640x480%E7%9A%84%E7%BA%A2%E8%89%B2%E5%9B%BE%E5%83%8F%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22__widthMode%22%3A%22normal%22%2C%22id%22%3A%22DB6Qd%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%2C%22widthMode%22%3A%22normal%22%7D" hindent="2em"></card><p data-lake-id="uf0a9f3b7" id="uf0a9f3b7" style="text-indent: 2em"><span data-lake-id="ud0b2d5a9" id="ud0b2d5a9" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CV_8UC3 表示每个像素由 3 个 8-bit 无符号通道组成（通常为 BGR）</span></p><p data-lake-id="ue72c1b0c" id="ue72c1b0c"><span data-lake-id="u3a17d407" id="u3a17d407" class="lake-fontsize-12">注意常规赋值操作只会复制标头和指向矩阵的指针，而不是数据本身。内存管理也由系统自动进行。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22A%E3%80%81B%E3%80%81C%E6%8C%87%E5%90%91%E5%90%8C%E4%B8%80%E6%95%B0%E6%8D%AE%EF%BC%81%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Mat%20A%20%3D%20imread(path%2C%20IMREAD_COLOR)%3B%20%5CnMat%20B(A)%3B%20%20%20%20%20%20%20%20%20%2F%2F%E8%B0%83%E7%94%A8%E5%A4%8D%E5%88%B6%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5CnMat%20C%20%3D%20A%3B%20%20%20%20%20%20%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22A%E3%80%81B%E3%80%81C%E6%8C%87%E5%90%91%E5%90%8C%E4%B8%80%E6%95%B0%E6%8D%AE%EF%BC%81%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22zIrgy%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="ua0dbc75d" id="ua0dbc75d"><span data-lake-id="u6cff4707" id="u6cff4707" class="lake-fontsize-12">若非要复制图像的底层矩阵，请用</span><a href="https://docs.opencv.org/4.x/d3/d63/classcv_1_1Mat.html#a03d2a2570d06dcae378f788725789aa4" target="_blank" data-lake-id="u73979421" id="u73979421"><span data-lake-id="u33659e8a" id="u33659e8a" class="lake-fontsize-11">cv::Mat::clone()</span></a><span data-lake-id="u0d97a6f0" id="u0d97a6f0" class="lake-fontsize-12">函数进行深拷贝。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Mat%20D%20%3D%20A.copy()%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22B5Deg%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u1535bf82" id="u1535bf82"><span data-lake-id="u04a8e437" id="u04a8e437" class="lake-fontsize-12">可进行部分复制，实现裁剪的效果：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E5%8F%AA%E5%BC%95%E7%94%A8A%E5%9C%A8%E7%9F%A9%E5%BD%A2Rect%E5%86%85%E7%9A%84%E7%9F%A9%E9%98%B5%E5%85%83%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Mat%20D%20(A%2C%20Rect(10%2C%2010%2C%20100%2C%20100)%20)%3B%20%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E5%8F%AA%E5%BC%95%E7%94%A8A%E5%9C%A8%E7%9F%A9%E5%BD%A2Rect%E5%86%85%E7%9A%84%E7%9F%A9%E9%98%B5%E5%85%83%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22iPXbH%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><h4 data-lake-id="bT2Ri" id="bT2Ri"><span data-lake-id="ub2064848" id="ub2064848">3.2相关函数</span></h4><p data-lake-id="u16f559b8" id="u16f559b8" style="text-align: center"><strong><span data-lake-id="u97f941d6" id="u97f941d6" class="lake-fontsize-12">读写显示</span></strong></p><h5 data-lake-id="wGybJ" id="wGybJ"><span data-lake-id="u1ddc9a01" id="u1ddc9a01" style="color: rgb(63, 74, 84)">cv::imread（image_path， [IMREAD_COLOR]）</span></h5><p data-lake-id="u2f90350c" id="u2f90350c" style="text-indent: 2em"><span data-lake-id="u5d94ffc9" id="u5d94ffc9" class="lake-fontsize-12">返回读入的Mat类型变量。</span></p><p data-lake-id="u1fa62d48" id="u1fa62d48" style="padding-left: 2em"><span data-lake-id="ue1f780e7" id="ue1f780e7" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">image_path：string类型的图片文件地址</span></p><p data-lake-id="u3db3b76c" id="u3db3b76c" style="padding-left: 2em"><span data-lake-id="u7605c972" id="u7605c972" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">[IMREAD_COLOR]：默认为BGR模式</span></p><details data-lake-id="u2c8672e5" id="u2c8672e5" open="true" class="lake-collapse"><summary data-lake-id="ucd9fa82c" id="ucd9fa82c" class="lake-summary"><span data-lake-id="u972ae6fd" id="u972ae6fd" class="lake-fontsize-10" style="color: rgb(0, 0, 0); background-color: rgb(251, 252, 253)">可选3种模式</span></summary><ul list="ufcf47718"><li fid="uf6ec3b52" data-lake-id="u738fd76b" id="u738fd76b"><span data-lake-id="u6f0cb425" id="u6f0cb425" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">IMREAD_COLOR  以BGR 8 位格式加载图像。这是此处使用的</span><strong><span data-lake-id="ua8ac7fa2" id="ua8ac7fa2" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">默认值</span></strong><span data-lake-id="u7a4d63ee" id="u7a4d63ee" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">。</span></li><li fid="uf6ec3b52" data-lake-id="uc20bd7f9" id="uc20bd7f9"><span data-lake-id="u97e23892" id="u97e23892" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">IMREAD_UNCHANGED  按原样加载图像（包括 alpha 通道（如果存在））</span></li><li fid="uf6ec3b52" data-lake-id="uf4117c2d" id="uf4117c2d"><span data-lake-id="ue3276070" id="ue3276070" class="lake-fontsize-11" style="color: rgb(0, 0, 0)">IMREAD_GRAYSCALE  将图像加载为强度图像</span></li></ul></details><h5 data-lake-id="hYPrf" id="hYPrf"><span data-lake-id="u95ca0d75" id="u95ca0d75" style="color: rgb(63, 74, 84)">cv::imshow(&quot;Display window&quot;, img)</span></h5><p data-lake-id="ubeeacfa3" id="ubeeacfa3" style="text-indent: 2em"><span data-lake-id="u55fb17f5" id="u55fb17f5" class="lake-fontsize-12">新建窗口显示图像, 常需搭配waitKey()使用。</span></p><p data-lake-id="u57835525" id="u57835525" style="text-indent: 2em"><span data-lake-id="u3609d8c7" id="u3609d8c7" style="color: rgb(63, 74, 84)">Display window：窗口标题</span></p><p data-lake-id="uf66bc8eb" id="uf66bc8eb" style="padding-left: 2em"><span data-lake-id="u6b8cec71" id="u6b8cec71">img：Mat对象</span></p><h5 data-lake-id="UQ5q1" id="UQ5q1"><span data-lake-id="u071d5981" id="u071d5981" style="color: rgb(70, 101, 162)">cv::imwrite(</span><span data-lake-id="u1f82f5bc" id="u1f82f5bc" style="color: rgb(63, 74, 84)">image_path</span><span data-lake-id="u854cbff1" id="u854cbff1" class="lake-fontsize-10" style="color: rgb(0, 0, 0); background-color: rgb(251, 252, 253)">， img）</span></h5><p data-lake-id="uc04809f0" id="uc04809f0" style="text-indent: 2em"><span data-lake-id="ubac1097f" id="ubac1097f">将路径</span><span data-lake-id="u4df7a64b" id="u4df7a64b" style="color: rgb(63, 74, 84)">image_path下的图像写入Mat对象img。</span></p><p data-lake-id="u448a7807" id="u448a7807" style="text-align: center"><strong><span data-lake-id="uddaff4c7" id="uddaff4c7" class="lake-fontsize-12">透视变换</span></strong></p><h5 data-lake-id="Pz7b2" id="Pz7b2"><span data-lake-id="ude5c5ac4" id="ude5c5ac4" style="color: rgb(70, 101, 162)">缩放</span></h5><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3Aresize(Mat%20image%2C%20Mat%20resizedImage%2C%20Size%20size(newWidth%2C%20newHeight)%EF%BC%8C%5Bdouble%20dx%2Cdouble%20dy%5D)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22jlKqK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u60aebbd7" id="u60aebbd7" style="text-indent: 2em"><span data-lake-id="ua524f05a" id="ua524f05a">将image放缩至size大小的结果存入resizedImage;</span></p><p data-lake-id="uc39aedb9" id="uc39aedb9" style="text-indent: 2em"><span data-lake-id="u59322b4f" id="u59322b4f">也可选择传入空Size()并按dx:x,dy:y的比例放缩原尺寸(x,y)。</span></p><h5 data-lake-id="Ejbs2" id="Ejbs2"><span data-lake-id="u336c230d" id="u336c230d" style="color: rgb(70, 101, 162)">仿射变换</span></h5><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22warpAffine(image%2C%20affineImage%2C%20affineMatrix%2C%20image.size())%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22nsirE%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="u7590f416" id="u7590f416" open="true" class="lake-collapse"><summary data-lake-id="u263d1555" id="u263d1555" class="lake-summary"><span data-lake-id="u9020c0f0" id="u9020c0f0">参数</span></summary><ul list="uee1104c4"><li fid="ud0c66f7f" data-lake-id="u75946259" id="u75946259"><span data-lake-id="u2e85f83c" id="u2e85f83c" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">src: 输入图像（cv::Mat）。</span></li><li fid="ud0c66f7f" data-lake-id="ue55b3fef" id="ue55b3fef"><span data-lake-id="u486540d1" id="u486540d1" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dst: 输出图像（cv::Mat），大小由 dsize 决定（width, height）。也可以预先分配并传入。</span></li><li fid="ud0c66f7f" data-lake-id="u46dfd695" id="u46dfd695"><span data-lake-id="u77e240cb" id="u77e240cb" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">M: 2x3 仿射变换矩阵（cv::Mat 或 cv::Matx23f / cv::Matx23d），类型为 CV_32F 或 CV_64F。</span></li><li fid="ud0c66f7f" data-lake-id="u1e329520" id="u1e329520"><span data-lake-id="u1a983f7b" id="u1a983f7b" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dsize: 输出图像尺寸，格式为 cv::Size(width, height)。当 dsize = Size()（空）时，输出尺寸默认为与输入相同（不过最好显式指定）</span></li></ul></details><p data-lake-id="u067814f0" id="u067814f0"><span data-lake-id="ub64c7259" id="ub64c7259" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">当有 3 个非共线点的对应关系时</span></p><p data-lake-id="u9cf71c29" id="u9cf71c29"><span data-lake-id="uc1164f56" id="uc1164f56" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">cv::Mat M=cv::getAffineTransform(srcTri, dstTri) 接受 3 个源点和 3 个目标点，返回 2x3 矩阵。</span></p><h5 data-lake-id="WD0Uc" id="WD0Uc"><span data-lake-id="u2a7a82c0" id="u2a7a82c0" style="color: rgb(70, 101, 162)">透视变换</span></h5><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22warpPerspective(src%2Cwraped%2CM%2C%20dsize%2C%20dst%3DNone%2C%20flags%3DNone%2C%20borderMode%3DNone%2C%20borderValue%3DNone)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22SqooI%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="u45d72a32" id="u45d72a32" open="true" class="lake-collapse"><summary data-lake-id="udf9850b3" id="udf9850b3" class="lake-summary"><span data-lake-id="u68c632db" id="u68c632db">参数</span></summary><ul list="u004390ab"><li fid="u77af1cf1" data-lake-id="u04ad7a4b" id="u04ad7a4b"><span data-lake-id="ua564a887" id="ua564a887" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">src: 输入图像</span></li><li fid="u77af1cf1" data-lake-id="u6a280357" id="u6a280357"><span data-lake-id="ue4cece79" id="ue4cece79" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">wraped：储存变换后的图像</span></li><li fid="u77af1cf1" data-lake-id="u9561c5c5" id="u9561c5c5"><span data-lake-id="u2ce6f559" id="u2ce6f559" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">M: 3x3 的透视变换矩阵（Homography）H</span></li><li fid="u77af1cf1" data-lake-id="ubcfa6723" id="ubcfa6723"><span data-lake-id="u1d56b06c" id="u1d56b06c" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dsize: 输出图像大小 (width, height)</span></li></ul></details><p data-lake-id="ub28b84ed" id="ub28b84ed"><span data-lake-id="u2e58b22c" id="u2e58b22c" style="color: rgb(70, 101, 162)">透视变换矩阵H直接求法：</span></p><p data-lake-id="ubb98d24b" id="ubb98d24b" style="text-indent: 2em"><span data-lake-id="u40cc7f1d" id="u40cc7f1d" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">cv::Mat H = </span><strong><span data-lake-id="udff5bfb6" id="udff5bfb6" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">cv::getPerspectiveTransform(srcPts, dstPts)</span></strong><span data-lake-id="uf84d67dc" id="uf84d67dc" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">;</span></p><p data-lake-id="u205f46d8" id="u205f46d8" style="text-indent: 2em"><span data-lake-id="u5697237f" id="u5697237f" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">srcPts、 dstPts为Point2f[4]型数组，分别存放映射前后相对应的4个点的信息</span><strong><span data-lake-id="u15e7864c" id="u15e7864c" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">。</span></strong></p><h5 data-lake-id="dspI7" id="dspI7" style="text-align: center"><span data-lake-id="ub454b49d" id="ub454b49d">颜色空间变换</span></h5><p data-lake-id="u28335ad0" id="u28335ad0"><strong><span data-lake-id="uf2801ee8" id="uf2801ee8" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">RGB</span></strong><span data-lake-id="u4b8d102f" id="u4b8d102f" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">：表示红、绿、蓝三个通道。</span><strong><span data-lake-id="u1f411b05" id="u1f411b05" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">BGR：</span></strong><span data-lake-id="u791371f5" id="u791371f5" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">表示蓝、绿、红三个通道。</span></p><p data-lake-id="ue63ce605" id="ue63ce605"><strong><span data-lake-id="u46fc92dc" id="u46fc92dc" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">灰度</span></strong><span data-lake-id="u78976467" id="u78976467" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">：灰度图像只有一个通道，表示亮度。</span></p><p data-lake-id="u0ed08930" id="u0ed08930"><strong><span data-lake-id="ue68e0518" id="ue68e0518" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">HSV</span></strong><span data-lake-id="u7e405df9" id="u7e405df9" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">：HSV颜色空间表示色调（Hue）、饱和度（Saturation）和亮度（Value）</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3AcvtColor(image%2C%20outcome%2C%20MODE)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22ZzaQn%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u984d3fd3" id="u984d3fd3"><span data-lake-id="u54ca8928" id="u54ca8928" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">MODE=cv::COLOR_BGR2HSV：BGR转HSV</span></p><p data-lake-id="ubdef42d6" id="ubdef42d6"><span data-lake-id="ue79d4759" id="ue79d4759" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">MODE= cv::COLOR_BGR2GRAY：BGR转灰度</span></p><p data-lake-id="ub82203b4" id="ub82203b4"><card type="inline" name="image" value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2025%2Fpng%2F57358625%2F1761454761433-4d9473e8-e9b0-4581-bd50-858a28770f15.png%22%2C%22taskId%22%3A%22u5f7367f8-2622-484c-ba17-1b1681f808b%22%2C%22clientId%22%3A%22u04a48609-3504-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A519.4000244140625%2C%22height%22%3A311%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A542969%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1099%2C%22originHeight%22%3A658%2C%22ratio%22%3A1.25%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22ocrLocations%22%3A%5B%7B%22text%22%3A%22IMGGRAY%22%2C%22x%22%3A144%2C%22y%22%3A14%2C%22width%22%3A86%2C%22height%22%3A15%7D%2C%7B%22text%22%3A%22IMG%22%2C%22x%22%3A825%2C%22y%22%3A15%2C%22width%22%3A50%2C%22height%22%3A18%7D%2C%7B%22text%22%3A%22X%22%2C%22x%22%3A716%2C%22y%22%3A13%2C%22width%22%3A38%2C%22height%22%3A16%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%237b7870%22%2C%22id%22%3A%22uc39183e9%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card></p><h5 data-lake-id="GYUcW" id="GYUcW" style="text-align: center"><span data-lake-id="u274b0527" id="u274b0527">颜色识别</span></h5><p data-lake-id="ue1cc6be7" id="ue1cc6be7"><strong><span data-lake-id="u69a61555" id="u69a61555">颜色识别流程：</span></strong></p><p data-lake-id="u989cc768" id="u989cc768" style="text-indent: 2em"><span data-lake-id="u0af03e02" id="u0af03e02">先cvtColor()将BGR转为HSV(更易识别)；</span></p><p data-lake-id="ueb73b0c1" id="ueb73b0c1" style="text-indent: 2em"><span data-lake-id="u82ebba0d" id="u82ebba0d">用Trackbar调试出合适的识别范围；</span></p><p data-lake-id="u5ac8493a" id="u5ac8493a" style="text-indent: 2em"><span data-lake-id="u26396898" id="u26396898">inRange()生成识别特定颜色区域的掩码图像mask；</span></p><p data-lake-id="ud96838bb" id="ud96838bb"><strong><span data-lake-id="u47351456" id="u47351456">inRange：</span></strong><span data-lake-id="u36751210" id="u36751210" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">用于颜色分割、阈值化</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22void%20inRange(InputArray%20src%2C%20InputArray%20lowerb%2C%20InputArray%20upperb%2C%20OutputArray%20dst)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22U6AdK%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><ul list="u51437d04"><li fid="u37046454" data-lake-id="uc396592a" id="uc396592a"><span data-lake-id="u4b01afed" id="u4b01afed" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">src: 输入图像。</span></li><li fid="u37046454" data-lake-id="u5f7dec55" id="u5f7dec55"><span data-lake-id="u9fb14422" id="u9fb14422" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">lowerb/upperb: 下界/上界。</span></li></ul><ul list="u51437d04" data-lake-indent="1"><li fid="u37046454" data-lake-id="u286beb92" id="u286beb92"><span data-lake-id="u95bc0f37" id="u95bc0f37" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">数据类型要与 src 相同（三通道Scalar，对于单通道用一个数值即可）。</span></li></ul><ul list="u51437d04" start="3"><li fid="u37046454" data-lake-id="u29e82873" id="u29e82873"><span data-lake-id="ue8d45bcd" id="ue8d45bcd" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dst: 输出单通道8 位掩码图像。在范围内为白，否则黑。</span></li></ul><p data-lake-id="u623f0a3a" id="u623f0a3a"><strong><span data-lake-id="uf5cc188e" id="uf5cc188e" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">lowerb/upperb的获取：</span></strong></p><p data-lake-id="uc78dc5b4" id="uc78dc5b4" style="text-indent: 2em"><span data-lake-id="uaadfab15" id="uaadfab15" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">可用滑动条Trackbar交互式调整参数范围。</span></p><p data-lake-id="u5465a39b" id="u5465a39b"><span data-lake-id="u7ca23187" id="u7ca23187" class="lake-fontsize-12">创建交互窗口：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22%20%20namedWindow(%5C%22Trackbars%5C%22)%3B%5Cn%20%20struct%20HSVParams%20%7B%5Cn%20%20%20%20int%20hmin%2C%20smin%2C%20vmin%3B%5Cn%20%20%20%20int%20hmax%2C%20smax%2C%20vmax%3B%5Cn%20%20%7Dp%3B%5Cn%20%20%20%20createTrackbar(%5C%22Hmin%5C%22%2C%20%5C%22Trackbars%5C%22%2C%20%26p.hmin%2C179)%3B%5Cn%20%20%20%20createTrackbar(%5C%22Hmax%5C%22%2C%20%5C%22Trackbars%5C%22%2C%20%26p.hmax%2C179)%3B%5Cn%20%20%20%20createTrackbar(%5C%22Smin%5C%22%2C%20%5C%22Trackbars%5C%22%2C%20%26p.smin%2C255)%3B%5Cn%20%20%20%20createTrackbar(%5C%22Vmin%5C%22%2C%20%5C%22Trackbars%5C%22%2C%20%26p.vmin%2C255)%3B%5Cn%20%20%20%20createTrackbar(%5C%22Smax%5C%22%2C%20%5C%22Trackbars%5C%22%2C%20%26p.smax%2C255)%3B%5Cn%20%20%20%20createTrackbar(%5C%22Vmax%5C%22%2C%20%5C%22Trackbars%5C%22%2C%20%26p.vmax%2C255)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22AyTbq%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="udad5c705" id="udad5c705"><span data-lake-id="ua5ad4427" id="ua5ad4427" class="lake-fontsize-12">调用inRange()：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22while(true)%5Cn%7B%5Cn%20%20Scalar%20lower%3D(p.hmin%2Cp.smin%2Cp.vmin)%3B%5Cn%20%20Scalar%20upper%3D(p.hmax%2Cp.smax%2Cp.vmax)%3B%5Cn%20%20inRange(img%2Clower%2Cupper%2Cmask)%3B%5Cn%20%20......%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22kJnVs%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u08649f62" id="u08649f62" style="text-align: center"><strong><span data-lake-id="ue4b3169d" id="ue4b3169d" class="lake-fontsize-12">图像滤波</span></strong></p><h5 data-lake-id="jPf2u" id="jPf2u"><span data-lake-id="u6ce0567e" id="u6ce0567e" style="color: rgb(70, 101, 162)">均值滤波</span></h5><p data-lake-id="ucc4a2288" id="ucc4a2288"><span data-lake-id="u7159a79f" id="u7159a79f" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">简单的线性滤波方法。将图像中每个像素的值替换为其指定邻域size()内所有像素值的平均值。这种方法可以有效去除噪声，但也会使图像变得模糊。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3Ablur(InputArray%20src%2C%20OutputArray%20dst%2C%20Size%20ksize%2C%20Point%20anchor%20%3D%20Point(-1%2C-1))%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22Rd77o%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="uf9cc1fb3" id="uf9cc1fb3" open="true" class="lake-collapse"><summary data-lake-id="uc82cf0db" id="uc82cf0db" class="lake-summary"><span data-lake-id="uec61dad5" id="uec61dad5" class="lake-fontsize-11">参数说明</span></summary><ul list="u8a46f7c1"><li fid="ua35a5db9" data-lake-id="u67322df2" id="u67322df2"><span data-lake-id="u67e3b3b8" id="u67e3b3b8" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">src: 输入图像（cv::Mat）。</span></li><li fid="ua35a5db9" data-lake-id="u63f0001d" id="u63f0001d"><span data-lake-id="u7d430818" id="u7d430818" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dst: 输出图像（cv::Mat）。</span></li><li fid="ua35a5db9" data-lake-id="u58651782" id="u58651782"><span data-lake-id="u6c18a080" id="u6c18a080" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">ksize: 卷积核大小，cv::Size(width, height)。width 和 height 为正奇数（通常），也可为偶数但效果与边界处理有关。ksize = Size(3,3) 表示以 3x3 窗口做均值。</span></li><li fid="ua35a5db9" data-lake-id="ufdd763c0" id="ufdd763c0"><span data-lake-id="u3dcf2c80" id="u3dcf2c80" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">anchor: 卷积核锚点（通常中心），默认 Point(-1,-1) 表示锚点在核中心。</span></li></ul></details><h5 data-lake-id="hyXYt" id="hyXYt"><span data-lake-id="u7efa527f" id="u7efa527f" style="color: rgb(70, 101, 162)">高斯滤波</span></h5><p data-lake-id="uc586b713" id="uc586b713"><span data-lake-id="u42cd4f7f" id="u42cd4f7f" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">一种非线性滤波方法，使用高斯函数来计算邻域内像素的权重，从而对图像进行平滑处理。高斯滤波在去除噪声的同时，能够更好地保留图像的边缘信息。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3AGaussianBlur(InputArray%20src%2C%20OutputArray%20dst%2C%20Size%20ksize%2C%5Cndouble%20sigmaX%2C%20double%20sigmaY%20%3D%200)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22njMSP%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="ua4a006d2" id="ua4a006d2" open="true" class="lake-collapse"><summary data-lake-id="u89b72db3" id="u89b72db3" class="lake-summary"><span data-lake-id="u33d4c9d7" id="u33d4c9d7" class="lake-fontsize-11">参数说明</span></summary><ul list="u017b6981"><li fid="ud3d8ac56" data-lake-id="ud7bfe58d" id="ud7bfe58d"><span data-lake-id="u15ce549f" id="u15ce549f" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">ksize: 高斯核大小 Size(width, height)。width 与 height 应为正奇数（或 Size(0,0) 让函数根据 sigma 自动计算核大小）。常见如 Size(3,3)、Size(5,5)、Size(7,7)。</span></li><li fid="ud3d8ac56" data-lake-id="ub362ac3f" id="ub362ac3f"><span data-lake-id="uaad9e793" id="uaad9e793" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">sigmaX: X 方向的高斯标准差（以像素为单位）。必须 &gt;= 0。若 sigmaX = 0，则由 ksize 计算合适的 sigma。</span></li><li fid="ud3d8ac56" data-lake-id="u303377da" id="u303377da"><span data-lake-id="u21a81268" id="u21a81268" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">sigmaY: Y 方向的标准差。默认 0 —— 若为 0 则设为 sigmaY = sigmaX；</span></li></ul><p data-lake-id="u410d7156" id="u410d7156"><span data-lake-id="u0573f8d5" id="u0573f8d5" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">sigmaX 较大会更强平滑；sigmaY 可用于各向异性平滑</span></p></details><p data-lake-id="u087c0870" id="u087c0870"><span data-lake-id="u042074dd" id="u042074dd" class="lake-fontsize-11">例——ksize=Size(7,7),</span><span data-lake-id="uac17b271" id="uac17b271" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">sigmaX=5,sigmaY=5的处理效果：</span></p><p data-lake-id="ua3c3f75d" id="ua3c3f75d"><card type="inline" name="image" value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2025%2Fpng%2F57358625%2F1761454683420-823afb2a-9459-4911-8ea5-35a8e9379495.png%22%2C%22taskId%22%3A%22u086f04aa-9d77-45ff-ad02-56c3bc6190f%22%2C%22clientId%22%3A%22u04a48609-3504-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A703.4000244140625%2C%22height%22%3A275%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A1102776%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A1803%2C%22originHeight%22%3A706%2C%22ratio%22%3A1.25%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22ocrLocations%22%3A%5B%7B%22text%22%3A%22%5B1OO%25%5DLINKINGCXXEXECUTABLEDISPLAY_IMAGE%22%2C%22x%22%3A70%2C%22y%22%3A665%2C%22width%22%3A592%2C%22height%22%3A25%7D%2C%7B%22text%22%3A%22IMGBLUR%22%2C%22x%22%3A519%2C%22y%22%3A25%2C%22width%22%3A96%2C%22height%22%3A25%7D%2C%7B%22text%22%3A%22IMG%22%2C%22x%22%3A1190%2C%22y%22%3A51%2C%22width%22%3A76%2C%22height%22%3A27%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23666b4e%22%2C%22id%22%3A%22u2b39b607%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card></p><h5 data-lake-id="ajeCC" id="ajeCC"><span data-lake-id="ufc1680a4" id="ufc1680a4" style="color: rgb(70, 101, 162)">中值滤波</span></h5><p data-lake-id="u0b001fb0" id="u0b001fb0"><span data-lake-id="u376a839c" id="u376a839c" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">一种非线性滤波方法，将图像中每个像素的值替换为其邻域内所有像素值的中值。这种方法在去除椒盐噪声（脉冲噪声）时效果非常好。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3AmedianBlur(InputArray%20src%2C%20OutputArray%20dst%2C%20int%20ksize)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22eQ4Mu%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="ue391d05a" id="ue391d05a" open="true" class="lake-collapse"><summary data-lake-id="uc44e1ece" id="uc44e1ece" class="lake-summary"><span data-lake-id="u840262af" id="u840262af" class="lake-fontsize-11">参数说明</span></summary><p data-lake-id="u2fdca95a" id="u2fdca95a"><span data-lake-id="u1be6a19e" id="u1be6a19e" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">ksize: 一维核大小（奇数），表示方形窗口的边长。</span></p></details><p data-lake-id="u62f247ea" id="u62f247ea" style="text-align: center"><strong><span data-lake-id="u286bbf2d" id="u286bbf2d" class="lake-fontsize-12">图像边缘检测——识别图像中物体的边界</span></strong></p><p data-lake-id="u355fbec4" id="u355fbec4"><span data-lake-id="uf80ab8de" id="uf80ab8de" class="lake-fontsize-12">先看直观效果：</span></p><p data-lake-id="uf00c7d3b" id="uf00c7d3b"><span data-lake-id="ue6e26237" id="ue6e26237" class="lake-fontsize-12">Canny</span></p><p data-lake-id="u14748fe2" id="u14748fe2"><card type="inline" name="image" value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2025%2Fpng%2F57358625%2F1761457036028-41e4cf50-3d5f-4516-be55-8dc2474f91ee.png%22%2C%22taskId%22%3A%22u12bf2b51-0490-41bf-9942-8d153dfbc7f%22%2C%22clientId%22%3A%22u04a48609-3504-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A311.6000061035156%2C%22height%22%3A300%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A261753%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A802%2C%22originHeight%22%3A771%2C%22ratio%22%3A1.25%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23191918%22%2C%22id%22%3A%22ue90b5a69%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><card type="inline" name="image" value="data:%7B%22src%22%3A%22https%3A%2F%2Fcdn.nlark.com%2Fyuque%2F0%2F2025%2Fpng%2F57358625%2F1761457070619-5908dfac-3764-40ab-9b78-fd3ca5eee5d4.png%22%2C%22taskId%22%3A%22uc0a3f20c-9976-4b06-8394-c95fddeb43b%22%2C%22clientId%22%3A%22u04a48609-3504-4%22%2C%22originalType%22%3A%22binary%22%2C%22width%22%3A310.8000183105469%2C%22height%22%3A299%2C%22linkTarget%22%3A%22_blank%22%2C%22name%22%3A%22image.png%22%2C%22size%22%3A636051%2C%22from%22%3A%22paste%22%2C%22originWidth%22%3A806%2C%22originHeight%22%3A775%2C%22ratio%22%3A1.25%2C%22status%22%3A%22done%22%2C%22style%22%3A%22none%22%2C%22ocrLocations%22%3A%5B%7B%22text%22%3A%22%22%2C%22x%22%3A533%2C%22y%22%3A220%2C%22width%22%3A126%2C%22height%22%3A103%7D%2C%7B%22text%22%3A%22IMG%22%2C%22x%22%3A389%2C%22y%22%3A5%2C%22width%22%3A27%2C%22height%22%3A14%7D%5D%2C%22showTitle%22%3Afalse%2C%22title%22%3A%22%22%2C%22rotation%22%3A0%2C%22crop%22%3A%5B0%2C0%2C1%2C1%5D%2C%22averageHue%22%3A%22%23d9ddd7%22%2C%22id%22%3A%22u24d60285%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card></p><h5 data-lake-id="FxN8H" id="FxN8H"><span data-lake-id="u3ca66b21" id="u3ca66b21">Sobel算子</span></h5><p data-lake-id="u05fbc280" id="u05fbc280"><span data-lake-id="ud8ab2e2b" id="ud8ab2e2b" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">一种基于梯度的边缘检测方法，可以检测图像中的水平和垂直边缘。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22void%20cv%3A%3ASobel(src%2C%20dst%2C%20int%20ddepth%2Cint%20dx%2C%20int%20dy%2C%20int%20ksize%3D3%2C%20double%20scale%3D1)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22oJmY6%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="u92286890" id="u92286890" open="true" class="lake-collapse"><summary data-lake-id="u2d66c8e6" id="u2d66c8e6" class="lake-summary"><span data-lake-id="u09433c62" id="u09433c62" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">部分参数说明</span></summary><ul list="u5b717b28"><li fid="ua6b34ff4" data-lake-id="u1f3d6109" id="u1f3d6109"><span data-lake-id="ueb3f6d62" id="ueb3f6d62" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">src: 输入图像，通常为灰度图。（p.s.理论上也可以是多通道（对每通道分别处理）)</span></li><li fid="ua6b34ff4" data-lake-id="u85eea2d8" id="u85eea2d8"><span data-lake-id="u3ce360c7" id="u3ce360c7" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dst: 输出图像，类型由 ddepth 决定。</span></li><li fid="ua6b34ff4" data-lake-id="u55225c18" id="u55225c18"><span data-lake-id="u747eea8e" id="u747eea8e" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">ddepth: 输出图像深度。常用值：</span></li></ul><ul list="u5b717b28" data-lake-indent="1"><li fid="u616e1857" data-lake-id="u22785477" id="u22785477"><span data-lake-id="u7431dd6b" id="u7431dd6b" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CV_8U (uchar)：容易溢出/截断，不推荐直接用于保存梯度结果。</span></li><li fid="u616e1857" data-lake-id="u7d342f49" id="u7d342f49"><span data-lake-id="u99114b45" id="u99114b45" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CV_16S：常用于先保存有符号梯度，再转换回 CV_8U（abs + convertScaleAbs）。</span></li><li fid="u616e1857" data-lake-id="ucde539c1" id="ucde539c1"><span data-lake-id="uf45eabfd" id="uf45eabfd" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CV_32F / CV_64F：用于更精确的计算与后续处理（如计算幅值与角度）。</span></li></ul><ul list="u5b717b28" start="4"><li fid="ua6b34ff4" data-lake-id="ua0167592" id="ua0167592"><span data-lake-id="u8b501890" id="u8b501890" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dx, dy: 对输入图像分别应用多少阶导数。常见组合：</span></li></ul><ul list="u5b717b28" data-lake-indent="1"><li fid="ud522d221" data-lake-id="u957e6f61" id="u957e6f61"><span data-lake-id="uc6801360" id="uc6801360" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dx=1, dy=0 -&gt; 水平方向的一阶导数 Gx</span></li><li fid="ud522d221" data-lake-id="u13ebf2eb" id="u13ebf2eb"><span data-lake-id="u3eff63d4" id="u3eff63d4" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dx=0, dy=1 -&gt; 垂直方向的一阶导数 Gy</span></li><li fid="ud522d221" data-lake-id="uda4b1f62" id="uda4b1f62"><span data-lake-id="u7f5e045f" id="u7f5e045f" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">dx=2, dy=0 -&gt; 水平方向的二阶导数</span></li></ul><ul list="u5b717b28" start="5"><li fid="ua6b34ff4" data-lake-id="u49ebfcd0" id="u49ebfcd0"><span data-lake-id="u7b2ee11d" id="u7b2ee11d" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">ksize: Sobel 核大小（1、3、5、7 等）。ksize=1 表示使用 Scharr 算子近似</span></li></ul></details><h5 data-lake-id="mysSq" id="mysSq"><span data-lake-id="u4eac0f88" id="u4eac0f88">Canny边缘检测</span></h5><p data-lake-id="uc3a08988" id="uc3a08988"><span data-lake-id="u73808891" id="u73808891" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">一种多阶段的边缘检测算法，能够有效地检测出图像中的边缘，并且对噪声具有较强的鲁棒性。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Canny(img%2Cdst%2Cthreshold1%2Cthreshold2)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22X1fvt%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u676e350c" id="u676e350c"><span data-lake-id="u94b8b6b7" id="u94b8b6b7">img：输入图，必须为灰度。</span></p><p data-lake-id="ued7cf2c3" id="ued7cf2c3"><span data-lake-id="ub80147e6" id="ub80147e6" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">threshold1 (低阈值)、threshold2 (高阈值)：检测边缘的阈值。</span></p><p data-lake-id="u9237de14" id="u9237de14"><span data-lake-id="uc9e446ec" id="uc9e446ec" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">threshold1 = ratio * threshold2（ratio 常见 0.4~0.6）。</span></p><ul list="u9d059ac9"><li fid="u7c072a82" data-lake-id="u0bcfa8b9" id="u0bcfa8b9"><span data-lake-id="u3353fa67" id="u3353fa67" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">经验法则：先尝试高阈值 100~200，再设置低阈值为 0.4*high。</span></li></ul><p data-lake-id="uccbc1e30" id="uccbc1e30"><strong><span data-lake-id="u0c042ba7" id="u0c042ba7" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">*</span></strong><span data-lake-id="ub9074098" id="ub9074098" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">双阈值滞后（Hysteresis）：使用低、高两个阈值连接边缘：高阈值以上的像素直接保留为强边缘，低阈值到高阈值之间的像素只有当与强边缘连通时才保留为边缘，其余舍弃。</span></p><p data-lake-id="ufaf108f4" id="ufaf108f4" style="text-align: center"><strong><span data-lake-id="u8d8aeda5" id="u8d8aeda5" class="lake-fontsize-12">图像形态学操作</span></strong></p><h5 data-lake-id="eRsjO" id="eRsjO"><span data-lake-id="u7d9e0d22" id="u7d9e0d22">膨胀</span></h5><p data-lake-id="u03fc3649" id="u03fc3649"><span data-lake-id="u2d2bb233" id="u2d2bb233" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">膨胀操作可以扩大图像中的前景物体，常用于填补前景物体中的空洞。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3Adilate(src%2C%20dst%2C%20kernel)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22wgknr%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u0c894134" id="u0c894134"><span data-lake-id="ua704b677" id="ua704b677" class="lake-fontsize-11">获取内核：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Mat%20kernel%20%3D%20getStructuringElement(MORPH_RECT%2CSize(5%2C5))%3B%5Ct%2F%2FSize%E8%B6%8A%E5%A4%A7%EF%BC%8C%E8%86%A8%E8%83%80%E8%B6%8A%E5%A4%9A%E3%80%82%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22nzgYz%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><h5 data-lake-id="wwI9n" id="wwI9n"><span data-lake-id="u1e98dbe6" id="u1e98dbe6">腐蚀</span></h5><p data-lake-id="u61275b97" id="u61275b97"><span data-lake-id="u505e899c" id="u505e899c" class="lake-fontsize-11" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">腐蚀操作可以消除图像中的小物体或细节。效果与dilate相反，语法相同。</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22cv%3A%3Adilate(src%2C%20dst%2C%20kernel)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22URhAv%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><h5 data-lake-id="HpaeR" id="HpaeR" style="text-align: center"><span data-lake-id="u36312379" id="u36312379">形状识别</span></h5><p data-lake-id="u24c1b5ba" id="u24c1b5ba"><strong><span data-lake-id="u60eeae5a" id="u60eeae5a" class="lake-fontsize-11">1.预处理：</span></strong></p><p data-lake-id="u57cda1dd" id="u57cda1dd" style="text-indent: 2em"><strong><span data-lake-id="uaaace056" id="uaaace056" class="lake-fontsize-11">转为灰度图-&gt;高斯滤波-&gt;Canny处理</span></strong><span data-lake-id="u12579c7c" id="u12579c7c" class="lake-fontsize-11">(提取边缘)</span><strong><span data-lake-id="ua7701d42" id="ua7701d42" class="lake-fontsize-11">-&gt;适度Dilate处理</span></strong><span data-lake-id="u41a5dd80" id="u41a5dd80" class="lake-fontsize-11">(以防Canny后边缘有断点)</span></p><p data-lake-id="ubc5b5b89" id="ubc5b5b89"><strong><span data-lake-id="ubf29635b" id="ubf29635b" class="lake-fontsize-11">2.轮廓识别与绘制</span></strong></p><p data-lake-id="u04538f5f" id="u04538f5f"><span data-lake-id="ue4aba94b" id="ue4aba94b" class="lake-fontsize-11">识别轮廓</span><strong><span data-lake-id="u92dfba38" id="u92dfba38" class="lake-fontsize-11">：</span></strong></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22void%20findContours(image%2C%20contours%2C%20hierarchy%2C%20mode%2C%20method%5B%2C...%2Coffset%3DPoint()%5D%20)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22GUje5%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="u897ea8f5" id="u897ea8f5" open="true" class="lake-collapse"><summary data-lake-id="u79980994" id="u79980994" class="lake-summary"><span data-lake-id="u04e1e817" id="u04e1e817" class="lake-fontsize-11">参数说明</span></summary><ul list="u8deface9"><li fid="u772e1eb0" data-lake-id="u80bfacaf" id="u80bfacaf"><span data-lake-id="u984c0d57" id="u984c0d57" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">image：输入单通道图像（CV_8U）</span></li></ul><ul list="u8deface9" data-lake-indent="1"><li fid="ucfcdf1a7" data-lake-id="u97ee1a59" id="u97ee1a59"><span data-lake-id="u65470df7" id="u65470df7" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">注意：输入图像会被修改（将连通组件标记），若后续需要原图，用 clone() 传入副本。</span></li></ul><ul list="u8deface9" start="2"><li fid="u772e1eb0" data-lake-id="u74dfeb5e" id="u74dfeb5e"><span data-lake-id="uc7ab2c27" id="uc7ab2c27" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">contours：输出轮廓集合。类型：vector&lt;vector&lt;Point&gt;&gt;。</span></li><li fid="u772e1eb0" data-lake-id="u6dce0e2b" id="u6dce0e2b"><span data-lake-id="u955c7f10" id="u955c7f10" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">hierarchy：若传入非空矩阵，会返回每个轮廓的层级信息，为 N x 4 的整型数组，每行对应 [next, previous, first_child, parent]：</span></li></ul><ul list="u8deface9" data-lake-indent="2"><li fid="u4622c52a" data-lake-id="uf2d57ce2" id="uf2d57ce2"><span data-lake-id="ufc522b56" id="ufc522b56" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">next: 同一层级下的下一个轮廓索引（无则 -1）</span></li><li fid="u4622c52a" data-lake-id="u97f18372" id="u97f18372"><span data-lake-id="ubf09d1af" id="ubf09d1af" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">previous: 同一层级下的上一个轮廓索引（无则 -1）</span></li><li fid="u4622c52a" data-lake-id="u50f8e089" id="u50f8e089"><span data-lake-id="u4749765f" id="u4749765f" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">first_child: 第一个子轮廓索引（无则 -1）</span></li><li fid="u4622c52a" data-lake-id="ue865ebf1" id="ue865ebf1"><span data-lake-id="uc8f1d4b9" id="uc8f1d4b9" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">parent: 父轮廓索引（无则 -1）</span></li></ul><ul list="u8deface9" data-lake-indent="1"><li fid="u4622c52a" data-lake-id="uabfc97fd" id="uabfc97fd"><span data-lake-id="u7215429a" id="u7215429a" class="lake-fontsize-12">类型可为vector&lt;Vec4i&gt;</span></li></ul><ul list="u8deface9" start="4"><li fid="u772e1eb0" data-lake-id="u92366bf2" id="u92366bf2"><span data-lake-id="u501a4e2f" id="u501a4e2f" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">mode (检索模式)，常用值：</span></li></ul><ul list="u8deface9" data-lake-indent="1"><li fid="u772e1eb0" data-lake-id="u078af682" id="u078af682"><span data-lake-id="u38b51a22" id="u38b51a22" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">RETR_TREE：检索所有轮廓并建立完整层级</span></li><li fid="u772e1eb0" data-lake-id="uec23a8d9" id="uec23a8d9"><span data-lake-id="u5571254b" id="u5571254b" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">RETR_EXTERNAL：只检索最外层轮廓（忽略嵌套）</span></li><li fid="u772e1eb0" data-lake-id="u3d41cdc9" id="u3d41cdc9"><span data-lake-id="u32b8f75c" id="u32b8f75c" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">RETR_LIST：检索所有轮廓，但不建立层级关系</span></li><li fid="u772e1eb0" data-lake-id="uab5ac5b5" id="uab5ac5b5"><span data-lake-id="u8947ed50" id="u8947ed50" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">RETR_CCOMP：建立两层层级，一般背景/前景的两级</span></li></ul><ul list="u8deface9" start="5"><li fid="u772e1eb0" data-lake-id="u19e129c4" id="u19e129c4"><span data-lake-id="u4c94112b" id="u4c94112b" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">method（近似方法），常用值：</span></li></ul><ul list="u8deface9" data-lake-indent="1"><li fid="u772e1eb0" data-lake-id="ucf8aaba4" id="ucf8aaba4"><span data-lake-id="u2bd00c20" id="u2bd00c20" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CHAIN_APPROX_SIMPLE：保存必要点（水平/垂直/对角直线段只保留端点）节省内存</span></li><li fid="u772e1eb0" data-lake-id="ub5603f4c" id="ub5603f4c"><span data-lake-id="u4c3cfe18" id="u4c3cfe18" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CHAIN_APPROX_NONE：保存所有轮廓点（冗长）</span></li><li fid="u772e1eb0" data-lake-id="u9b14b1de" id="u9b14b1de"><span data-lake-id="u0ca526e6" id="u0ca526e6" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CHAIN_APPROX_TC89_L1 / TC89_KCOS：Teh-Chin 链近似算法</span></li></ul><ul list="u8deface9" start="6"><li fid="u772e1eb0" data-lake-id="u93960565" id="u93960565"><span data-lake-id="u40f4a719" id="u40f4a719" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">offset：对所有返回轮廓点加上偏移量（x,y），常用于从 ROI 或子图得到的轮廓映射到原图坐标。</span></li></ul></details><p data-lake-id="u931f3ee5" id="u931f3ee5"><span data-lake-id="ua0977e58" id="ua0977e58" class="lake-fontsize-11">绘制轮廓：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22void%20drawContours(image%2Ccontours%2Ccontourldx%2Ccolor%5B%2Cthickness%3D1%2C...%2Coffset%3DPoint()%5D)%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22atiFr%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="u5c4f3da2" id="u5c4f3da2" open="true" class="lake-collapse"><summary data-lake-id="u9974e250" id="u9974e250" class="lake-summary"><span data-lake-id="u0f4e8d0f" id="u0f4e8d0f" class="lake-fontsize-11">参数说明</span></summary><ul list="u8da4514d"><li fid="u6cf36eda" data-lake-id="u173cd216" id="u173cd216"><strong><span data-lake-id="ucfa33073" id="ucfa33073" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">image</span></strong><span data-lake-id="ufacb7299" id="ufacb7299" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">：待绘制轮廓的目标图像。</span></li><li fid="u6cf36eda" data-lake-id="udd59f79d" id="udd59f79d"><strong><span data-lake-id="ud9bc93d2" id="ud9bc93d2" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">contours</span></strong><span data-lake-id="uc9e6e6ed" id="uc9e6e6ed" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">：轮廓集合。</span></li><li fid="u6cf36eda" data-lake-id="uc2ca508d" id="uc2ca508d"><strong><span data-lake-id="ud7ae4637" id="ud7ae4637" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">contourIdx</span></strong><span data-lake-id="ua8278ac4" id="ua8278ac4" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">：要绘制的轮廓在</span><strong><span data-lake-id="udc5d74ae" id="udc5d74ae" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">contours</span></strong><span data-lake-id="uea95f3a6" id="uea95f3a6" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">中的索引( -1 绘制所有轮廓)</span></li><li fid="u6cf36eda" data-lake-id="uc05d2f36" id="uc05d2f36"><strong><span data-lake-id="u1119791b" id="u1119791b" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">color</span></strong><span data-lake-id="ueab06c75" id="ueab06c75" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">：绘制颜色。</span></li><li fid="u6cf36eda" data-lake-id="u48c515fa" id="u48c515fa"><span data-lake-id="u8a8f1d44" id="u8a8f1d44" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">offset</span></li></ul><ul list="u8da4514d" data-lake-indent="1"><li fid="u0f478adb" data-lake-id="u18381f84" id="u18381f84"><span data-lake-id="uf522fc9e" id="uf522fc9e" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">对所有绘制点加上偏移量（x,y），常用于把 ROI 中的轮廓绘制回整张图时恢复坐标。</span></li></ul></details><p data-lake-id="uc6032ffb" id="uc6032ffb"><span data-lake-id="u23133057" id="u23133057" class="lake-fontsize-11">消除噪音：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22for(int%20i%3D0%3Bi%3Ccontours.size()%3Bi%2B%2B)%5Cn%7B%5Cn%20%20int%20area%3DcontourArea(contours%5Bi%5D)%3B%20%20%2F%2F%E8%BF%94%E5%9B%9E%E8%BD%AE%E5%BB%93%E9%9D%A2%E7%A7%AF%E7%9A%84%E5%87%BD%E6%95%B0%5Cn%20%20if(area%3E%3Dmin)%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%5Ct%2F%2Fmin%E4%B8%BA%E9%9D%A2%E7%A7%AF%E6%9C%80%E4%BD%8E%E9%98%88%E5%80%BC%5Cn%20%20%7B%5Cn%20%20%20%20drawContours(img%2Ccontours%2Ci%2CScalar(%2C%2C))%3B%5Cn%20%20%7D%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22t6AMb%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><h3 data-lake-id="YhoaA" id="YhoaA" style="text-align: center"><span data-lake-id="u1169838d" id="u1169838d">4.视频处理</span></h3><h4 data-lake-id="jTBYQ" id="jTBYQ"><span data-lake-id="u5b56dcf0" id="u5b56dcf0">4.1数据类</span></h4><h5 data-lake-id="aJTNk" id="aJTNk"><span data-lake-id="u60adaa7a" id="u60adaa7a" style="color: rgb(51, 51, 51); background-color: rgb(250, 252, 253)">VideoCapture</span></h5><p data-lake-id="u9b4ac2f3" id="u9b4ac2f3" style="text-indent: 2em"><span data-lake-id="u98e508dc" id="u98e508dc" class="lake-fontsize-11">创建并打开视频文件：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22using%20namespace%20cv%3B%5CnVideoCapture%20cap(%5C%22example.mp4%5C%22)%3B%5Ct%5Ct%2F%2F%E5%8F%82%E6%95%B0%E4%B9%9F%E5%8F%AF%E4%B8%BA0(%E5%86%85%E7%BD%AE%E6%91%84%E5%83%8F%E5%A4%B4)%E6%88%96URL%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22r52my%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u07ee2948" id="u07ee2948" style="text-indent: 2em"><span data-lake-id="uf8f9b4a3" id="uf8f9b4a3" class="lake-fontsize-11">循环读取下一帧图像：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%E4%BE%8B%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22Mat%20frame%3B%5Cnwhile(1)%7B%5Cn%20%20if(!cap.read(frame))%5Ct%5Ct%5Cn%20%20%7B%20%2F%2F%E5%A4%B1%E8%B4%A5%E5%A4%84%E7%90%86%E8%AF%AD%E5%8F%A5%20%7D%5Cn%20%20imshow(%5C%22testvideo%5C%22%2Cframe)%3B%5Cn%20%20waitkey(5)%3B%5Cn%7D%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Afalse%2C%22name%22%3A%22%E4%BE%8B%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22tX6bt%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><p data-lake-id="u6c609f45" id="u6c609f45" style="text-indent: 2em"><span data-lake-id="u26267669" id="u26267669" class="lake-fontsize-11">成员</span></p><details data-lake-id="ubf794cc4" id="ubf794cc4" open="false" hindent="2em" class="lake-collapse"><summary data-lake-id="uef867cf3" id="uef867cf3" class="lake-summary"><span data-lake-id="u8c4f5ab4" id="u8c4f5ab4" class="lake-fontsize-11">部分属性</span></summary><ul list="u3313cc3c"><li fid="ue522aca0" data-lake-id="uedbf4ace" id="uedbf4ace"><span data-lake-id="u072c7893" id="u072c7893" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CAP_PROP_FRAME_WIDTH、CAP_PROP_FRAME_HEIGHT：帧宽高</span></li><li fid="ue522aca0" data-lake-id="ucde6925b" id="ucde6925b"><span data-lake-id="ube4c7ec2" id="ube4c7ec2" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CAP_PROP_FRAME_COUNT：视频总帧数（仅对文件源有效）</span></li><li fid="ue522aca0" data-lake-id="u0ec10095" id="u0ec10095"><span data-lake-id="udb04dc67" id="udb04dc67" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CAP_PROP_FPS：帧率</span></li><li fid="ue522aca0" data-lake-id="ub09f0aa3" id="ub09f0aa3"><span data-lake-id="u9830dbff" id="u9830dbff" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CAP_PROP_POS_FRAMES：当前帧位置（跳转到某帧）</span></li><li fid="ue522aca0" data-lake-id="u8ee08cd6" id="u8ee08cd6"><span data-lake-id="u677cbc34" id="u677cbc34" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">CAP_PROP_POS_MSEC：当前位置的毫秒数</span></li></ul></details><p data-lake-id="u5a87ace7" id="u5a87ace7" style="text-indent: 2em"><span data-lake-id="u4869ca7b" id="u4869ca7b" class="lake-fontsize-11">.get(属性)：返回相应属性</span></p><p data-lake-id="uc25d81d5" id="uc25d81d5" style="text-indent: 2em"><span data-lake-id="u9094ef35" id="u9094ef35" class="lake-fontsize-11">.set(属性，value)：设置属性为value</span></p><p data-lake-id="u3ff32038" id="u3ff32038" style="padding-left: 2em"><span data-lake-id="u06b032f0" id="u06b032f0" class="lake-fontsize-11">.open(path)：打开文件路径path下的视频</span></p><p data-lake-id="ueb319ac7" id="ueb319ac7" style="text-indent: 2em"><span data-lake-id="u78a66038" id="u78a66038" class="lake-fontsize-11">.isOpened()：成功打开返回true</span></p><p data-lake-id="u3387b88a" id="u3387b88a" style="text-indent: 2em"><span data-lake-id="uc33beba8" id="uc33beba8" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">.</span><span data-lake-id="u0dec99ec" id="u0dec99ec" class="lake-fontsize-11">read(frame)：</span><span data-lake-id="ua4f57861" id="ua4f57861" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">从视频源获取</span><strong><span data-lake-id="uafccc316" id="uafccc316" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">下一</span></strong><span data-lake-id="u1d093139" id="u1d093139" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">可用帧</span><span data-lake-id="uc43c7275" id="uc43c7275" class="lake-fontsize-11">存入Mat frame；成功则返回true，失败false。</span></p><p data-lake-id="ue5070f4b" id="ue5070f4b" style="text-indent: 2em"><span data-lake-id="uc364e7f0" id="uc364e7f0" class="lake-fontsize-11">.release()：释放内存~</span></p><h5 data-lake-id="RQh6q" id="RQh6q"><span data-lake-id="u0dcb370c" id="u0dcb370c">VideoWriter：</span><span data-lake-id="u099eaaf2" id="u099eaaf2" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">用来将一系列图像帧写入到视频文件（或输出流）的类</span></h5><p data-lake-id="u4f214149" id="u4f214149" style="text-indent: 2em"><span data-lake-id="ub365f4c5" id="ub365f4c5" class="lake-fontsize-11">创建：</span></p><card type="inline" name="codeblock" value="data:%7B%22search%22%3A%22%22%2C%22mode%22%3A%22abap%22%2C%22code%22%3A%22VideoWriter%20writer%3B%5Cnwriter.open(filename%2C%20FourCC%2C%20fps%2C%20frameSize)%3B%5Cn%2F%2F%E6%88%96%E7%9B%B4%E6%8E%A5%EF%BC%9A%5CnVideoWriter%20writer(filename%2C%20fourcc%2C%20fps%2C%20frameSize)%3B%22%2C%22autoWrap%22%3Afalse%2C%22lineNumbers%22%3Atrue%2C%22heightLimit%22%3Atrue%2C%22collapsed%22%3Afalse%2C%22hideToolbar%22%3Atrue%2C%22name%22%3A%22%22%2C%22tabSize%22%3Anull%2C%22indentWithTab%22%3Afalse%2C%22lightLines%22%3A%5B%5D%2C%22foldLines%22%3A%5B%5D%2C%22theme%22%3A%22default%22%2C%22fontSize%22%3A14%2C%22customStyle%22%3A%5B%5D%2C%22__spacing%22%3A%22both%22%2C%22id%22%3A%22yqtWS%22%2C%22margin%22%3A%7B%22top%22%3Atrue%2C%22bottom%22%3Atrue%7D%7D"></card><details data-lake-id="u1e23692d" id="u1e23692d" open="true" class="lake-collapse"><summary data-lake-id="u8aa68a59" id="u8aa68a59" class="lake-summary"><span data-lake-id="u9d9f48b3" id="u9d9f48b3" class="lake-fontsize-11">参数说明</span></summary><ul list="ucdacfb0e"><li fid="uc141c3b8" data-lake-id="u1535db8c" id="u1535db8c"><span data-lake-id="u0f9ef899" id="u0f9ef899" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">filename: 输出文件路径。某些后端也支持流 URL。</span></li><li fid="uc141c3b8" data-lake-id="uf4a33bd2" id="uf4a33bd2"><span data-lake-id="u7a3e0c07" id="u7a3e0c07" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">FourCC：告诉后端使用哪种视频编码器。可以用 cv::VideoWriter::fourcc('X','2','6','4') 或 cv::VideoWriter::fourcc('M','J','P','G')</span></li><li fid="uc141c3b8" data-lake-id="ud0f5df52" id="ud0f5df52"><span data-lake-id="ue8299595" id="ue8299595" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">fps: 目标帧率（浮点或整数）。 可用&lt;VideoCapture对象名&gt;.get(CAP_PROP_FPS)获取</span></li><li fid="uc141c3b8" data-lake-id="u796d5645" id="u796d5645"><span data-lake-id="ua9602893" id="ua9602893" class="lake-fontsize-12" style="color: rgb(63, 74, 84)">frameSize: cv::Size(width, height)，每帧大小。写入时提供的帧需要与此大小一致</span></li></ul><ul list="ucdacfb0e" data-lake-indent="1"><li fid="uc141c3b8" data-lake-id="u651bf466" id="u651bf466"><span data-lake-id="u0cad2b15" id="u0cad2b15" class="lake-fontsize-10" style="color: rgb(0, 0, 0); background-color: rgb(249, 249, 249)">获取：Size frameSize</span><span data-lake-id="uba144a4c" id="uba144a4c" class="lake-fontsize-10" style="color: rgb(0, 128, 0)">(&lt;...&gt;</span><span data-lake-id="ubbc4aa7c" id="ubbc4aa7c" class="lake-fontsize-10" style="color: rgb(0, 0, 0); background-color: rgb(249, 249, 249)">.</span><span data-lake-id="u978f7b67" id="u978f7b67" class="lake-fontsize-10" style="color: rgb(0, 119, 136)">get</span><span data-lake-id="ucf77c1ff" id="ucf77c1ff" class="lake-fontsize-10" style="color: rgb(0, 128, 0)">(</span><span data-lake-id="u63a7ecfc" id="u63a7ecfc" class="lake-fontsize-10" style="color: rgb(0, 0, 0); background-color: rgb(249, 249, 249)">CAP_PROP_FRAME_WIDTH</span><span data-lake-id="u858d5edf" id="u858d5edf" class="lake-fontsize-10" style="color: rgb(0, 128, 0)">)</span><span data-lake-id="u2911a538" id="u2911a538" class="lake-fontsize-10" style="color: rgb(0, 0, 0); background-color: rgb(249, 249, 249)">,&lt;...&gt; .</span><span data-lake-id="uae6b820c" id="uae6b820c" class="lake-fontsize-10" style="color: rgb(0, 119, 136)">get</span><span data-lake-id="ufb3bbb1b" id="ufb3bbb1b" class="lake-fontsize-10" style="color: rgb(0, 128, 0)">(</span><span data-lake-id="ubeeb5d71" id="ubeeb5d71" class="lake-fontsize-10" style="color: rgb(0, 0, 0); background-color: rgb(249, 249, 249)">CAP_PROP_FRAME_HEIGHT</span><span data-lake-id="uaae98add" id="uaae98add" class="lake-fontsize-10" style="color: rgb(0, 128, 0)">))</span><span data-lake-id="u4fe1ada9" id="u4fe1ada9" class="lake-fontsize-10" style="color: rgb(0, 128, 128)">;</span></li></ul></details><p data-lake-id="u0b7af926" id="u0b7af926" style="text-indent: 2em"><span data-lake-id="ufe09e820" id="ufe09e820" class="lake-fontsize-11">成员：</span></p><p data-lake-id="u41ffdc1c" id="u41ffdc1c" style="text-indent: 2em"><span data-lake-id="u115f7874" id="u115f7874" class="lake-fontsize-11">.open()：初始化</span></p><p data-lake-id="ude8eaf59" id="ude8eaf59" style="text-indent: 2em"><span data-lake-id="ucb0395c7" id="ucb0395c7" class="lake-fontsize-11">.write(frame)：将帧frame写入输出视频文件</span></p><p data-lake-id="ud133dce8" id="ud133dce8" style="text-indent: 2em"><span data-lake-id="u47d46433" id="u47d46433" class="lake-fontsize-11">.release()：释放内存~</span></p><p data-lake-id="u81e8d29b" id="u81e8d29b" style="text-indent: 2em; padding-left: 2em"><span data-lake-id="u8480ca25" id="u8480ca25" class="lake-fontsize-11">​</span><br></p>